webpackJsonp([7],{260:function(t,e,a){"use strict";function o(t){l||a(852)}Object.defineProperty(e,"__esModule",{value:!0});var r=a(761),n=a.n(r);for(var s in r)"default"!==s&&function(t){a.d(e,t,function(){return r[t]})}(s);var c=a(854),i=a.n(c),l=!1,d=a(4),u=o,p=d(n.a,i.a,!1,u,"data-v-c9d4db26",null);p.options.__file="src/views/cargo/contract/ContractProduct.vue",e.default=p.exports},342:function(t,e,a){"use strict";function o(t){return new Date(t).Format("yyyy-MM-dd")}Object.defineProperty(e,"__esModule",{value:!0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},e.default=o},728:function(t,e,a){t.exports={default:a(729),__esModule:!0}},729:function(t,e,a){a(730),t.exports=a(1).Number.isInteger},730:function(t,e,a){var o=a(10);o(o.S,"Number",{isInteger:a(731)})},731:function(t,e,a){var o=a(11),r=Math.floor;t.exports=function(t){return!o(t)&&isFinite(t)&&r(t)===t}},761:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=a(728),n=(o(r),a(57)),s=o(n),c=a(342);o(c);e.default={data:function(){var t=this;return{loading:!0,contractId:null,count:0,gourpId:null,tempIndex:0,pageSize:20,pageNo:1,totalPage:0,totalCount:0,columns1:[{type:"selection",width:60,align:"center"},{title:"厂家",key:"factoryName"},{title:"货号",key:"productNo"},{title:"装率",key:"loadingRate"},{title:"箱数",width:90,key:"boxNum"},{title:"包装单位",key:"packingUnit"},{title:"数量",key:"cnumber"},{title:"单价",key:"price"},{title:"总金额",key:"amount"},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"/cargo/extCproduct/"+t.data1[a.index].id})}}},"附件")])}}],self:this,data1:[],modal1:!1,modal2:!1,updateForm:{factory:{id:""},contract:{id:""},factoryName:"",productNo:"",productImage:"",productDesc:"",loadingRate:"",boxNum:"",packingUnit:"",cnumber:"",outNumber:"",finished:"",productRequest:"",price:"",amount:"",orderNo:""},addForm:{factory:{id:"",factoryName:""},contract:{id:""},factoryName:"",productNo:"",productImage:"",productDesc:"翩若惊鸿",loadingRate:"6%",boxNum:"10",packingUnit:"PCS",cnumber:"10",outNumber:"",finished:"",productRequest:"",price:"10",amount:"",orderNo:"10"},ruleCustom:{"factory.id":[{required:!0,message:"不能为空",trigger:"blur"}],productNo:[{required:!0,message:"不能为空",trigger:"blur"}],cnumber:[{required:!0,message:"不能为空",trigger:"blur"}],packingUnit:[{required:!0,message:"不能为空",trigger:"blur"}],loadingRate:[{required:!0,message:"不能为空",trigger:"blur"}],boxNum:[{required:!0,message:"不能为空",trigger:"blur"}],price:[{required:!0,message:"不能为空",trigger:"blur"}],orderNo:[{required:!0,message:"不能为空",trigger:"blur"}],productDesc:[{required:!0,message:"不能为空",trigger:"blur"}],productRequest:[{required:!0,message:"不能为空",trigger:"blur"}]}}},methods:{changeFactory:function(t,e){t.factoryName=e.label},reset:function(t){this.$refs[t].resetFields()},addContractProduct:function(){this.modal2=!0},add:function(){var t=this;this.$refs.addForm.validate(function(e){if(e){t.addForm.contract.id=t.contractId;var a=t.addForm;(0,s.default)({url:"/cargo/contractProduct",method:"post",data:a}).then(function(e){t.gopage(t.pageNo),t.$refs.addForm.resetFields(),t.$Message.success("Success!"),t.modal2=!1})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})},show:function(t){this.$Modal.info({title:"购销合同货物信息",content:"姓名："+this.data1[t].contractProductName})},change:function(t){1==t.length&&(this.updateForm=t[0],null==this.updateForm.factory&&(this.updateForm.factory={id:null})),this.setGroupId(t)},setGroupId:function(t){this.groupId=[],this.count=t.length;for(var e=0;e<t.length;e++)this.groupId.push(t[e].id)},edit:function(){1!=this.count?(this.modal1=!1,this.$Message.warning("请至少并只能选择一项")):this.modal1=!0},remove:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,s.default)({url:"/cargo/contractProduct/",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},update:function(){var t=this;this.$refs.updateForm.validate(function(e){e?(0,s.default)({url:"/cargo/contractProduct",method:"put",data:t.updateForm}).then(function(e){t.modal1=!1,t.$Message.success("Success!"),t.gopage(t.pageNo)}):(t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3))})},handleReset:function(t){this.$refs[t].resetFields()},gopage:function(t){var e=this,a=this.pageSize,o=this.contractId;(0,s.default)({url:"/cargo/contractProduct",method:"get",params:{pageNo:t,pageSize:a,contractId:o}}).then(function(o){e.data1=o.data.list,e.pageNo=t,e.pageSize=a,e.totalCount=o.data.totalCount})}},mounted:function(){var t=this;this.contractId=this.$route.params.id,this.gopage(this.pageNo),(0,s.default)({url:"/cargo/factory/all",method:"get",params:{cType:"货物"}}).then(function(e){t.factoryList=e.data})}}},852:function(t,e,a){var o=a(853);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(15)("783683d4",o,!1,{})},853:function(t,e,a){e=t.exports=a(14)(!1),e.push([t.i,"\nli[data-v-c9d4db26]{list-style-type: none\n}\n",""])},854:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=this,a=e.$createElement,o=e._self._c||a;return o("div",{staticClass:"animated fadeIn"},[o("div",[o("ul",[o("li",[o("Button",{attrs:{type:"primary",icon:"plus-round"},on:{click:function(t){e.addContractProduct()}}},[e._v("新建")]),e._v(" "),o("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(t){e.edit()}}},[e._v("修改")]),e._v(" "),o("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(t){e.remove()}}},[e._v("删除")]),e._v(" "),o("Button",{attrs:{type:"info",icon:"arrow-left-c"},on:{click:function(e){t.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),o("li",[o("div",{staticStyle:{padding:"10px 0"}},[o("Table",{attrs:{columns:e.columns1,data:e.data1},on:{"on-selection-change":function(t){e.change(t)}}})],1)]),e._v(" "),o("li",[o("div",{staticStyle:{"text-align":"right"}},[o("Page",{attrs:{total:e.totalCount,"page-size":e.pageSize,current:e.pageNo,align:"center"},on:{"on-change":e.gopage}})],1)])])]),e._v(" "),o("Modal",{attrs:{title:"编辑购销合同货物",width:"60%",loading:e.loading},on:{"on-ok":e.update,"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[o("Form",{ref:"updateForm",attrs:{model:e.updateForm,"label-width":80}},[o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"生产厂家",prop:"factory.id"}},[o("Select",{attrs:{filterable:"","label-in-value":"true"},on:{"on-change":function(a){return e.changeFactory(t.updateFrom,a)}},model:{value:e.updateForm.factory.id,callback:function(t){e.$set(e.updateForm.factory,"id",t)},expression:"updateForm.factory.id"}},e._l(e.factoryList,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.factoryName))])}))],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"货号",prop:"productNo"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.productNo,callback:function(t){e.$set(e.updateForm,"productNo",t)},expression:"updateForm.productNo"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"数量",prop:"cnumber"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.cnumber,callback:function(t){e.$set(e.updateForm,"cnumber",t)},expression:"updateForm.cnumber"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"包装单位",prop:"packingUnit"}},[o("Radio-group",{attrs:{type:"button"},model:{value:e.updateForm.packingUnit,callback:function(t){e.$set(e.updateForm,"packingUnit",t)},expression:"updateForm.packingUnit"}},[o("Radio",{attrs:{label:"PCS"}},[e._v("只")]),e._v(" "),o("Radio",{attrs:{label:"SETS"}},[e._v("套")])],1)],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"装率",prop:"loadingRate"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.loadingRate,callback:function(t){e.$set(e.updateForm,"loadingRate",t)},expression:"updateForm.loadingRate"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"箱数",prop:"boxNum"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.boxNum,callback:function(t){e.$set(e.updateForm,"boxNum",t)},expression:"updateForm.boxNum"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"单价",prop:"price"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.price,callback:function(t){e.$set(e.updateForm,"price",t)},expression:"updateForm.price"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"排序号",prop:"orderNo"}},[o("Input",{attrs:{type:"text"},model:{value:e.updateForm.orderNo,callback:function(t){e.$set(e.updateForm,"orderNo",t)},expression:"updateForm.orderNo"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"货物描述",prop:"productDesc"}},[o("Input",{attrs:{type:"textarea"},model:{value:e.updateForm.productDesc,callback:function(t){e.$set(e.updateForm,"productDesc",t)},expression:"updateForm.productDesc"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"要求",prop:"productRequest"}},[o("Input",{attrs:{type:"textarea"},model:{value:e.updateForm.productRequest,callback:function(t){e.$set(e.updateForm,"productRequest",t)},expression:"updateForm.productRequest"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"24"}},[o("FormItem",[o("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")]),e._v(" "),o("Button",{attrs:{type:"ghost"},on:{click:function(t){e.reset("updateForm")}}},[e._v("清空")])],1)],1)],1)],1)],1),e._v(" "),o("Modal",{attrs:{title:"添加购销合同货物",width:"60%",loading:e.loading},on:{"on-ok":e.add,"on-cancel":e.cancel},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[o("Form",{ref:"addForm",attrs:{model:e.addForm,rules:e.ruleCustom,"label-width":80}},[o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"生产厂家",prop:"factory.id"}},[o("Select",{attrs:{filterable:"","label-in-value":"true"},on:{"on-change":function(a){return e.changeFactory(t.addForm,a)}},model:{value:e.addForm.factory.id,callback:function(t){e.$set(e.addForm.factory,"id",t)},expression:"addForm.factory.id"}},e._l(e.factoryList,function(t){return o("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.factoryName))])}))],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"货号",prop:"productNo"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.productNo,callback:function(t){e.$set(e.addForm,"productNo",t)},expression:"addForm.productNo"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"数量",prop:"cnumber"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.cnumber,callback:function(t){e.$set(e.addForm,"cnumber",t)},expression:"addForm.cnumber"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"包装单位",prop:"packingUnit"}},[o("Radio-group",{attrs:{type:"button"},model:{value:e.addForm.packingUnit,callback:function(t){e.$set(e.addForm,"packingUnit",t)},expression:"addForm.packingUnit"}},[o("Radio",{attrs:{label:"PCS"}},[e._v("只")]),e._v(" "),o("Radio",{attrs:{label:"SETS"}},[e._v("套")])],1)],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"装率",prop:"loadingRate"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.loadingRate,callback:function(t){e.$set(e.addForm,"loadingRate",t)},expression:"addForm.loadingRate"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"箱数",prop:"boxNum"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.boxNum,callback:function(t){e.$set(e.addForm,"boxNum",t)},expression:"addForm.boxNum"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"单价",prop:"price"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"排序号",prop:"orderNo"}},[o("Input",{attrs:{type:"text"},model:{value:e.addForm.orderNo,callback:function(t){e.$set(e.addForm,"orderNo",t)},expression:"addForm.orderNo"}})],1)],1)],1),e._v(" "),o("Row",[o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"货物描述",prop:"productDesc"}},[o("Input",{attrs:{type:"textarea"},model:{value:e.addForm.productDesc,callback:function(t){e.$set(e.addForm,"productDesc",t)},expression:"addForm.productDesc"}})],1)],1),e._v(" "),o("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),o("Col",{attrs:{span:"11"}},[o("FormItem",{attrs:{label:"要求",prop:"productRequest"}},[o("Input",{attrs:{type:"textarea"},model:{value:e.addForm.productRequest,callback:function(t){e.$set(e.addForm,"productRequest",t)},expression:"addForm.productRequest"}})],1)],1)],1)],1)],1)],1)},r=[];o._withStripped=!0;var n={render:o,staticRenderFns:r};e.default=n}});