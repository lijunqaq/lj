webpackJsonp([22],{259:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(760),o=a.n(r);for(var s in r)"default"!==s&&function(t){a.d(e,t,function(){return r[t]})}(s);var n=a(851),i=a.n(n),l=a(4),d=l(o.a,i.a,!1,null,null,null);d.options.__file="src/views/cargo/contract/Contract.vue",e.default=d.exports},342:function(t,e,a){"use strict";function r(t){return new Date(t).Format("yyyy-MM-dd")}Object.defineProperty(e,"__esModule",{value:!0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},e.default=r},760:function(t,e,a){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(57),s=r(o),n=a(342),i=r(n);e.default={data:function(){var t=this;return{loading:!0,count:0,gourpId:null,tempIndex:0,pageSize:20,pageNo:1,totalPage:0,totalCount:0,contractNo:"",columns1:[{type:"selection",width:60,align:"center"},{title:"客户名字",key:"customName"},{title:"合同号",key:"contractNo"},{title:"货物数/附件数",key:"nums"},{title:"制单人",width:90,key:"inputBy"},{title:"验货员",key:"inspector"},{title:"签单日期",key:"signingDate",render:function(t,e){return t("div",(0,i.default)(this.row.signingDate))}},{title:"交货期限",key:"deliveryPeriod",render:function(t,e){return t("div",(0,i.default)(this.row.deliveryPeriod))}},{title:"船期",key:"shipTime",render:function(t,e){return t("div",(0,i.default)(this.row.shipTime))}},{title:"总金额",width:80,key:"totalAmount"},{title:"状态",key:"state",width:80,render:function(t,e){var a=parseInt(e.row.state);return 0===a?t("div",[t("strong","草稿")]):1===a?t("div",[t("strong","已上报待保运")]):2===a?t("div",[t("strong","已保运")]):t("div",[t("strong","未知")])}},{title:"操作",key:"action",align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){t.$router.push({path:"/cargo/contractProduct/"+t.data1[a.index].id})}}},"货物")])}}],self:this,data1:[],modal1:!1,modal2:!1,updateForm:{id:"",offeror:"",contractNo:"",signingDate:"",inputBy:"",checkBy:"",inspector:"",totalAmount:"",crequest:"",customName:"",shipTime:"",importNum:"",deliveryPeriod:"",oldState:"",outState:"",tradeTerms:"",printStyle:"",remark:"",state:""},addForm:{offeror:"1",contractNo:"1",signingDate:"2018-12-12",inputBy:"cgx",checkBy:"cgx",inspector:"cgx",totalAmount:"0",crequest:"request",customName:"客户名字",shipTime:"2018-12-12",importNum:"1",deliveryPeriod:"2018-12-12",oldState:"",outState:"",tradeTerms:"fob",printStyle:"2",remark:"remark",state:"0"},ruleCustom:{customName:[{required:!0,message:"不能为空",trigger:"blur"}],contractNo:[{required:!0,message:"不能为空",trigger:"blur"}],offeror:[{required:!0,message:"不能为空",trigger:"blur"}],inputBy:[{required:!0,message:"不能为空",trigger:"blur"}],checkBy:[{required:!0,message:"不能为空",trigger:"blur"}],inspector:[{required:!0,message:"不能为空",trigger:"blur"}],importNum:[{required:!0,message:"不能为空",trigger:"blur"}],tradeTerms:[{required:!0,message:"不能为空",trigger:"blur"}]},cansubmit:!0}},methods:{reset:function(t){this.$refs[t].resetFields()},addContract:function(){this.modal2=!0},add:function(){var t=this;this.$refs.addForm.validate(function(e){if(e){var a=t.addForm;(0,s.default)({url:"/cargo/contract",method:"post",data:a}).then(function(e){t.gopage(t.pageNo),t.$refs.addForm.resetFields(),t.$Message.success("Success!"),t.modal2=!1})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})},show:function(t){this.$Modal.info({title:"购销合同信息",content:"姓名："+this.data1[t].contractName})},change:function(t){1==t.length&&(this.updateForm=t[0],this.updateForm.importNum=this.updateForm.importNum+"",this.updateForm.signingDate=(0,i.default)(t[0].signingDate),this.updateForm.shipTime=(0,i.default)(t[0].shipTime),this.updateForm.deliveryPeriod=(0,i.default)(t[0].deliveryPeriod)),this.setGroupId(t)},setGroupId:function(t){this.cansubmit=!0,this.groupId=[],this.count=t.length;for(var e=0;e<t.length;e++)0!=t[e].state&&(this.cansubmit=!1),this.groupId.push(t[e].id)},edit:function(){1!=this.count?(this.modal1=!1,this.$Message.warning("请至少并只能选择一项")):this.modal1=!0},remove:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,s.default)({url:"/cargo/contract",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},update:function(){var t=this;this.$refs.updateForm.validate(function(e){e?(0,s.default)({url:"/cargo/contract",method:"put",data:t.updateForm}).then(function(e){t.modal1=!1,t.$Message.success("Success!"),t.gopage(t.pageNo)}):(t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3))})},handleReset:function(t){this.$refs[t].resetFields()},gopage:function(t){var e=this,a=this.pageSize;(0,s.default)({url:"/cargo/contract",method:"get",params:{pageNo:t,pageSize:a}}).then(function(r){e.data1=r.data.list,e.pageNo=t,e.pageSize=a,e.totalCount=r.data.totalCount})},submit:function(){var t=this;null!=this.groupId&&""!=this.groupId?this.cansubmit?(0,s.default)({url:"/cargo/contract/submit",method:"put",data:this.groupId}).then(function(e){"1"==e.data?(t.$Message.success("Success!"),t.gopage()):(t.$Message.error("只能提交草稿状态!"),t.gopage())}):this.$Message.error("只能提交草稿状态的合同!"):this.$Message.warning("请至少选择一项")},cancel:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,s.default)({url:"/cargo/contract/cancel",method:"put",data:this.groupId}).then(function(e){"1"==e.data&&(t.$Message.success("Success!"),t.gopage())}):this.$Message.warning("请至少选择一项")},search:function(){this.gopage()}},mounted:function(){this.gopage(1)}}},851:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("Row",[a("Col",{attrs:{span:"8"}},[t._v("合同号：\n        "),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入..."},model:{value:t.contractNo,callback:function(e){t.contractNo=e},expression:"contractNo"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:function(e){t.search()}}},[t._v("搜索")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Button",{attrs:{type:"primary",icon:"plus-round"},on:{click:function(e){t.addContract()}}},[t._v("新建")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(e){t.edit()}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(e){t.remove()}}},[t._v("删除")]),t._v(" "),a("Button",{attrs:{type:"warning"},on:{click:function(e){t.submit()}}},[t._v("提交")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")])],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Table",{attrs:{columns:t.columns1,data:t.data1},on:{"on-selection-change":function(e){t.change(e)}}})],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Page",{attrs:{total:t.totalCount,"page-size":t.pageSize,current:t.pageNo,align:"center"},on:{"on-change":t.gopage}})],1),t._v(" "),a("Modal",{attrs:{title:"编辑购销合同",width:"60%",loading:t.loading},on:{"on-ok":t.update,"on-cancel":t.cancel},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[a("Form",{ref:"updateForm",attrs:{model:t.updateForm,rules:t.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"客户名称",prop:"customName"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.customName,callback:function(e){t.$set(t.updateForm,"customName",e)},expression:"updateForm.customName"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"打印板式",prop:"printStyle"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.updateForm.printStyle,callback:function(e){t.$set(t.updateForm,"printStyle",e)},expression:"updateForm.printStyle"}},[a("Radio",{attrs:{label:"2"}},[t._v("两款")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("一款")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"合同号",prop:"contractNo"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.contractNo,callback:function(e){t.$set(t.updateForm,"contractNo",e)},expression:"updateForm.contractNo"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"收购方",prop:"offeror"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.offeror,callback:function(e){t.$set(t.updateForm,"offeror",e)},expression:"updateForm.offeror"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"制单人",prop:"inputBy"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.inputBy,callback:function(e){t.$set(t.updateForm,"inputBy",e)},expression:"updateForm.inputBy"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"审单人",prop:"checkBy"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.checkBy,callback:function(e){t.$set(t.updateForm,"checkBy",e)},expression:"updateForm.checkBy"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"验货员",prop:"inspector"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.inspector,callback:function(e){t.$set(t.updateForm,"inspector",e)},expression:"updateForm.inspector"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"签单日期",prop:"signingDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.updateForm.signingDate,callback:function(e){t.$set(t.updateForm,"signingDate",e)},expression:"updateForm.signingDate"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"重要程度",prop:"importNum"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.updateForm.importNum,callback:function(e){t.$set(t.updateForm,"importNum",e)},expression:"updateForm.importNum"}},[a("Radio",{attrs:{label:"3"}},[t._v("★★★")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("★★")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("★")])],1)],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"船期",prop:"shipTime"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.updateForm.shipTime,callback:function(e){t.$set(t.updateForm,"shipTime",e)},expression:"updateForm.shipTime"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"贸易条款",prop:"tradeTerms"}},[a("Input",{attrs:{type:"text"},model:{value:t.updateForm.tradeTerms,callback:function(e){t.$set(t.updateForm,"tradeTerms",e)},expression:"updateForm.tradeTerms"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"交货日期",prop:"deliveryPeriod"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.updateForm.deliveryPeriod,callback:function(e){t.$set(t.updateForm,"deliveryPeriod",e)},expression:"updateForm.deliveryPeriod"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.updateForm.remark,callback:function(e){t.$set(t.updateForm,"remark",e)},expression:"updateForm.remark"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"要求",prop:"crequest"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.updateForm.crequest,callback:function(e){t.$set(t.updateForm,"crequest",e)},expression:"updateForm.crequest"}})],1)],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"添加购销合同",width:"60%",loading:t.loading},on:{"on-ok":t.add,"on-cancel":t.cancel},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("Form",{ref:"addForm",attrs:{model:t.addForm,rules:t.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"客户名称",prop:"customName"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.customName,callback:function(e){t.$set(t.addForm,"customName",e)},expression:"addForm.customName"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"打印板式",prop:"printStyle"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.addForm.printStyle,callback:function(e){t.$set(t.addForm,"printStyle",e)},expression:"addForm.printStyle"}},[a("Radio",{attrs:{label:"2"}},[t._v("两款")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("一款")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"合同号",prop:"contractNo"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.contractNo,callback:function(e){t.$set(t.addForm,"contractNo",e)},expression:"addForm.contractNo"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"收购方",prop:"offeror"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.offeror,callback:function(e){t.$set(t.addForm,"offeror",e)},expression:"addForm.offeror"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"制单人",prop:"inputBy"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.inputBy,callback:function(e){t.$set(t.addForm,"inputBy",e)},expression:"addForm.inputBy"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"审单人",prop:"checkBy"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.checkBy,callback:function(e){t.$set(t.addForm,"checkBy",e)},expression:"addForm.checkBy"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"验货员",prop:"inspector"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.inspector,callback:function(e){t.$set(t.addForm,"inspector",e)},expression:"addForm.inspector"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"签单日期",prop:"signingDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.addForm.signingDate,callback:function(e){t.$set(t.addForm,"signingDate",e)},expression:"addForm.signingDate"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"重要程度",prop:"importNum"}},[a("RadioGroup",{attrs:{type:"button"},model:{value:t.addForm.importNum,callback:function(e){t.$set(t.addForm,"importNum",e)},expression:"addForm.importNum"}},[a("Radio",{attrs:{label:"3"}},[t._v("★★★")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("★★")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("★")])],1)],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"船期",prop:"shipTime"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.addForm.shipTime,callback:function(e){t.$set(t.addForm,"shipTime",e)},expression:"addForm.shipTime"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"贸易条款",prop:"tradeTerms"}},[a("Input",{attrs:{type:"text"},model:{value:t.addForm.tradeTerms,callback:function(e){t.$set(t.addForm,"tradeTerms",e)},expression:"addForm.tradeTerms"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"交货日期",prop:"deliveryPeriod"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",format:"yyyy-MM-dd",placeholder:"Select date"},model:{value:t.addForm.deliveryPeriod,callback:function(e){t.$set(t.addForm,"deliveryPeriod",e)},expression:"addForm.deliveryPeriod"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.addForm.remark,callback:function(e){t.$set(t.addForm,"remark",e)},expression:"addForm.remark"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"要求",prop:"crequest"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.addForm.crequest,callback:function(e){t.$set(t.addForm,"crequest",e)},expression:"addForm.crequest"}})],1)],1)],1)],1)],1)],1)},o=[];r._withStripped=!0;var s={render:r,staticRenderFns:o};e.default=s}});