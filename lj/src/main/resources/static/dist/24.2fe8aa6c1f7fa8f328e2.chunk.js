webpackJsonp([24],{266:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=r(767),o=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,function(){return a[t]})}(i);var n=r(870),s=r.n(n),p=r(4),l=p(o.a,s.a,!1,null,null,null);l.options.__file="src/views/cargo/PackingList.vue",e.default=l.exports},342:function(t,e,r){"use strict";function a(t){return new Date(t).Format("yyyy-MM-dd")}Object.defineProperty(e,"__esModule",{value:!0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var r in e)new RegExp("("+r+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[r]:("00"+e[r]).substr((""+e[r]).length)));return t},e.default=a},767:function(t,e,r){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=r(57),i=a(o),n=r(342),s=a(n);e.default={data:function(){return{loading:!0,count:0,gourpId:null,pageSize:20,pageNo:1,totalPage:0,totalCount:0,keyWord:"",columns1:[{type:"selection",width:60,align:"center"},{title:"卖方",key:"seller"},{title:"买方",key:"buyer"},{title:"发票",key:"invoiceNo"},{title:"发票日期",key:"invoiceDate",render:function(t,e){return t("div",(0,s.default)(this.row.invoiceDate))}},{title:"报运NO集合",key:"exportNos"},{title:"状态",key:"state",render:function(t,e){var r=parseInt(e.row.state);return 0===r?t("div",[t("strong","草稿")]):1===r?t("div",[t("strong","已委托")]):t("div",[t("strong","unkown")])}}],self:this,data1:[],updateModal:!1,shippingModal:!1,updateForm:{seller:"",buyer:"",invoiceNo:"",invoiceDate:"",marks:"",descriptions:"",exportIds:"",exportNos:"",state:""},addShippingOrderForm:{orderType:"sea",shipper:"shipper",consignee:"consignee",notifyParty:"notifyParty",lcNo:"1234567888",portOfLoading:"大连",portOfTrans:"韩国",portOfDischarge:"卸货港",loadingDate:"2018-01-01",limitDate:"2018-03-03",isBatch:"0",isTrans:"0",copyNum:"2",remark:"说明",specialCondition:"易爆",freight:"fob",checkBy:"andy",state:"0"},formRule:{seller:[{required:!0,message:"卖方不能为空",trigger:"blur"}],buyer:[{required:!0,message:"买方不能为空",trigger:"blur"}],marks:[{required:!0,message:"不能为空",trigger:"blur"}],descriptions:[{required:!0,message:"不能为空",trigger:"blur"}],state:[{required:!0,message:"0草稿 1已上报不能为空",trigger:"blur"}]},states:""}},methods:{change:function(t){this.count=t.length,1==t.length&&(this.updateForm=t[0],this.updateForm.state=t[0].state+""),this.setGroupId(t)},setGroupId:function(t){this.groupId=[];for(var e=0;e<t.length;e++)this.groupId.push(t[e].id),this.states+=t[e].state},reset:function(t){this.$refs[t].resetFields()},edit:function(){1!=this.count?(this.updateModal=!1,this.$Message.warning("请至少并只能选择一项")):this.updateModal=!0},update:function(){var t=this;this.$refs.updateForm.validate(function(e){e?(0,i.default)({url:"/cargo/packingList",method:"put",data:t.updateForm}).then(function(e){t.updateModal=!1,t.$Message.success("Success!"),t.gopage(t.pageNo)}):(t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3))})},remove:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,i.default)({url:"/cargo/packingList",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},gopage:function(t){var e=this,r=this.pageSize,a=this.keyWord;(0,i.default)({url:"/cargo/packingList",method:"get",params:{pageNo:t,pageSize:r,keyWord:a}}).then(function(a){e.data1=a.data.list,e.pageNo=t,e.pageSize=r,e.totalCount=a.data.totalCount})},cancel:function(){this.$Message.info("点击了取消")},shipping:function(){-1!=this.states.indexOf("1")?this.$Message.warning("不能再次委托已经委托的装箱单"):null!=this.groupId&&""!=this.groupId&&1==this.groupId.length?this.shippingModal=!0:this.$Message.warning("请至少并只能选择一项开始委托")},addShippingOrder:function(){var t=this;this.$refs.addShippingOrderForm.validate(function(e){if(e){var r=t.addShippingOrderForm;(0,i.default)({url:"/cargo/shippingOrder",method:"post",data:r,params:{packingListIds:t.groupId}}).then(function(e){(0,i.default)({url:"/cargo/packingList/updateState",method:"put",params:{packingListIds:t.groupId}}).then(function(e){t.gopage(t.pageNo),t.$refs.addShippingOrderForm.resetFields(),t.$Message.success("Success!"),t.shippingModal=!1})})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})}},mounted:function(){this.gopage(1)}}},870:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"animated fadeIn"},[r("Row",[r("Col",{attrs:{span:"6"}},[t._v("\n            装箱单："),r("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入..."},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}})],1),t._v(" "),r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:function(e){t.gopage()}}},[t._v("搜索")])],1)],1),t._v(" "),r("br"),t._v(" "),r("Row",[r("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(e){t.edit()}}},[t._v("修改")]),t._v(" "),r("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(e){t.remove()}}},[t._v("删除")]),t._v(" "),r("Button",{attrs:{type:"primary",icon:"trash-a"},on:{click:function(e){t.shipping()}}},[t._v("委托")])],1),t._v(" "),r("br"),t._v(" "),r("Row",[r("Table",{attrs:{border:"",columns:t.columns1,data:t.data1},on:{"on-selection-change":t.change}})],1),t._v(" "),r("br"),t._v(" "),r("Row",[r("Page",{attrs:{total:t.totalCount,"page-size":t.pageSize,current:t.pageNo,align:"center"},on:{"on-change":t.gopage}})],1),t._v(" "),r("br"),t._v(" "),r("Modal",{attrs:{title:"编辑装箱单","mask-closable":!1,loading:t.loading,width:"60%"},on:{"on-ok":t.update,"on-cancel":t.cancel},model:{value:t.updateModal,callback:function(e){t.updateModal=e},expression:"updateModal"}},[r("Form",{ref:"updateForm",attrs:{model:t.updateForm,rules:t.formRule,"label-width":80}},[r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"卖方",prop:"seller"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.seller,callback:function(e){t.$set(t.updateForm,"seller",e)},expression:"updateForm.seller"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"买方",prop:"buyer"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.buyer,callback:function(e){t.$set(t.updateForm,"buyer",e)},expression:"updateForm.buyer"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"发票号",prop:"invoiceNo"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.invoiceNo,callback:function(e){t.$set(t.updateForm,"invoiceNo",e)},expression:"updateForm.invoiceNo"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"发票日期",prop:"invoiceDate"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.invoiceDate,callback:function(e){t.$set(t.updateForm,"invoiceDate",e)},expression:"updateForm.invoiceDate"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"唛头",prop:"marks"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.marks,callback:function(e){t.$set(t.updateForm,"marks",e)},expression:"updateForm.marks"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"描述",prop:"descriptions"}},[r("Input",{attrs:{type:"text"},model:{value:t.updateForm.descriptions,callback:function(e){t.$set(t.updateForm,"descriptions",e)},expression:"updateForm.descriptions"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"状态",prop:"state"}},[r("RadioGroup",{attrs:{type:"button"},model:{value:t.updateForm.state,callback:function(e){t.$set(t.updateForm,"state",e)},expression:"updateForm.state"}},[r("Radio",{attrs:{label:"0"}},[t._v("草稿")]),t._v(" "),r("Radio",{attrs:{label:"1"}},[t._v("已上报")])],1)],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}})],1)],1)],1),t._v(" "),r("Modal",{attrs:{title:"添加委托单","mask-closable":!1,loading:t.loading,width:"60%"},on:{"on-ok":t.addShippingOrder,"on-cancel":t.cancel},model:{value:t.shippingModal,callback:function(e){t.shippingModal=e},expression:"shippingModal"}},[r("Form",{ref:"addShippingOrderForm",attrs:{model:t.addShippingOrderForm,rules:t.formRule,"label-width":80}},[r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"货主",prop:"shipper"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.shipper,callback:function(e){t.$set(t.addShippingOrderForm,"shipper",e)},expression:"addShippingOrderForm.shipper"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"提单抬头",prop:"consignee"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.consignee,callback:function(e){t.$set(t.addShippingOrderForm,"consignee",e)},expression:"addShippingOrderForm.consignee"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"正本通知人",prop:"notifyParty"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.notifyParty,callback:function(e){t.$set(t.addShippingOrderForm,"notifyParty",e)},expression:"addShippingOrderForm.notifyParty"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"信用证",prop:"lcNo"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.lcNo,callback:function(e){t.$set(t.addShippingOrderForm,"lcNo",e)},expression:"addShippingOrderForm.lcNo"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"装运港",prop:"portOfLoading"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.portOfLoading,callback:function(e){t.$set(t.addShippingOrderForm,"portOfLoading",e)},expression:"addShippingOrderForm.portOfLoading"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"转船港",prop:"portOfTrans"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.portOfTrans,callback:function(e){t.$set(t.addShippingOrderForm,"portOfTrans",e)},expression:"addShippingOrderForm.portOfTrans"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"卸货港",prop:"portOfDischarge"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.portOfDischarge,callback:function(e){t.$set(t.addShippingOrderForm,"portOfDischarge",e)},expression:"addShippingOrderForm.portOfDischarge"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"装期",prop:"loadingDate"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"Select date"},model:{value:t.addShippingOrderForm.loadingDate,callback:function(e){t.$set(t.addShippingOrderForm,"loadingDate",e)},expression:"addShippingOrderForm.loadingDate"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"效期",prop:"limitDate"}},[r("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"Select date"},model:{value:t.addShippingOrderForm.limitDate,callback:function(e){t.$set(t.addShippingOrderForm,"limitDate",e)},expression:"addShippingOrderForm.limitDate"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"是否分批",prop:"isBatch"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.isBatch,callback:function(e){t.$set(t.addShippingOrderForm,"isBatch",e)},expression:"addShippingOrderForm.isBatch"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"是否转船",prop:"isTrans"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.isTrans,callback:function(e){t.$set(t.addShippingOrderForm,"isTrans",e)},expression:"addShippingOrderForm.isTrans"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"份数",prop:"copyNum"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.copyNum,callback:function(e){t.$set(t.addShippingOrderForm,"copyNum",e)},expression:"addShippingOrderForm.copyNum"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"扼要说明",prop:"remark"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.remark,callback:function(e){t.$set(t.addShippingOrderForm,"remark",e)},expression:"addShippingOrderForm.remark"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"运输要求",prop:"specialCondition"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.specialCondition,callback:function(e){t.$set(t.addShippingOrderForm,"specialCondition",e)},expression:"addShippingOrderForm.specialCondition"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"运费说明",prop:"freight"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.freight,callback:function(e){t.$set(t.addShippingOrderForm,"freight",e)},expression:"addShippingOrderForm.freight"}})],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"复核人",prop:"checkBy"}},[r("Input",{attrs:{type:"text"},model:{value:t.addShippingOrderForm.checkBy,callback:function(e){t.$set(t.addShippingOrderForm,"checkBy",e)},expression:"addShippingOrderForm.checkBy"}})],1)],1)],1),t._v(" "),r("Row",[r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"状态",prop:"state"}},[r("RadioGroup",{attrs:{type:"button"},model:{value:t.addShippingOrderForm.state,callback:function(e){t.$set(t.addShippingOrderForm,"state",e)},expression:"addShippingOrderForm.state"}},[r("Radio",{attrs:{label:"0"}},[t._v("草稿")]),t._v(" "),r("Radio",{attrs:{label:"1"}},[t._v("已上报")])],1)],1)],1),t._v(" "),r("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),r("Col",{attrs:{span:"11"}},[r("FormItem",{attrs:{label:"海运/空运",prop:"orderType"}},[r("RadioGroup",{attrs:{type:"button"},model:{value:t.addShippingOrderForm.orderType,callback:function(e){t.$set(t.addShippingOrderForm,"orderType",e)},expression:"addShippingOrderForm.orderType"}},[r("Radio",{attrs:{label:"sea"}},[t._v("海运")]),t._v(" "),r("Radio",{attrs:{label:"air"}},[t._v("空运")])],1)],1)],1)],1)],1)],1)],1)},o=[];a._withStripped=!0;var i={render:a,staticRenderFns:o};e.default=i}});