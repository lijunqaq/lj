webpackJsonp([5],{264:function(t,e,a){"use strict";function n(t){u||a(860)}Object.defineProperty(e,"__esModule",{value:!0});var o=a(765),s=a.n(o);for(var i in o)"default"!==i&&function(t){a.d(e,t,function(){return o[t]})}(i);var r=a(866),c=a.n(r),u=!1,l=a(4),p=n,d=l(s.a,c.a,!1,p,"data-v-3620d152",null);d.options.__file="src/views/cargo/export/Export.vue",e.default=d.exports},342:function(t,e,a){"use strict";function n(t){return new Date(t).Format("yyyy-MM-dd")}Object.defineProperty(e,"__esModule",{value:!0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in e)new RegExp("("+a+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[a]:("00"+e[a]).substr((""+e[a]).length)));return t},e.default=n},765:function(t,e,a){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var o=a(862),s=n(o),i=a(57),r=n(i),c=a(342),u=n(c);e.default={data:function(){return{count:0,gourpId:null,pageSize:20,pageNo:1,totalPage:0,totalCount:0,addModal:!1,loading:!0,columns1:[{type:"selection",width:60,align:"center"},{title:"货物数/附件数",key:"nums"},{title:"信用证号",key:"lcno"},{title:"装运港",width:90,key:"shipmentPort"},{title:"目的港",key:"destinationPort"},{title:"运输方式",key:"transportMode"},{title:"价格条件",key:"priceCondition"},{title:"制单日期",key:"inputDate",render:function(t,e){return t("div",(0,u.default)(this.row.inputDate))}},{title:"状态",key:"state",width:80,render:function(t,e){var a=parseInt(e.row.state);return 0===a?t("div",[t("strong","草稿")]):1===a?t("div",[t("strong","已上报")]):2===a?t("div",[t("strong","装箱")]):3===a?t("div",[t("strong","委托")]):4===a?t("div",[t("strong","发票")]):5===a?t("div",[t("strong","财务")]):t("div",[t("strong","未知")])}}],self:this,data1:[],packingForm:{id:"",seller:"",buyer:"",invoiceNo:"",invoiceDate:"",marks:"",descriptions:"",exportIds:"",exportNos:"",state:"0"},formRule:{seller:[{required:!0,message:"卖方不能为空",trigger:"blur"}],buyer:[{required:!0,message:"买方不能为空",trigger:"blur"}],marks:[{required:!0,message:"唛头不能为空",trigger:"blur"}],descriptions:[{required:!0,message:"描述不能为空",trigger:"blur"}]},states:""}},methods:(0,s.default)({reset:function(t){this.$refs[t].resetFields()},change:function(t){1==t.length&&(this.updateForm=t[0],this.updateForm.importNum=this.updateForm.importNum+""),this.setGroupId(t)},setGroupId:function(t){this.groupId=[],this.states="",this.count=t.length;for(var e=0;e<t.length;e++)this.groupId.push(t[e].id),this.states+=t[e].state},edit:function(){1!=this.count?(this.modal1=!1,this.$Message.warning("请至少并只能选择一项")):this.$router.push({path:"/cargo/exportEdit/"+this.groupId[0]})},remove:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,r.default)({url:"/cargo/export",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},handleReset:function(t){this.$refs[t].resetFields()},gopage:function(t){var e=this,a=this.pageSize;(0,r.default)({url:"/cargo/export",method:"get",params:{pageNo:t,pageSize:a}}).then(function(n){e.data1=n.data.list,e.pageNo=t,e.pageSize=a,e.totalCount=n.data.totalCount})},submit:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,r.default)({url:"/cargo/export/submit",method:"put",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},cancel:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,r.default)({url:"/cargo/export/cancel",method:"put",data:this.groupId}).then(function(e){"1"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},exports:function(){var t=this;null!=this.groupId&&""!=this.groupId&&1==this.groupId.length?(0,r.default)({url:"/cargo/export/export",method:"put",data:this.groupId}).then(function(e){"ok"==e.data?(t.$Message.success("Success!"),t.gopage(t.pageNo)):"false"==e.data&&t.$Message.error("报运失败!")}).catch(function(e){t.$Message.error("电子报运失败")}):this.$Message.warning("请至少并只能选择一项")},packing:function(){-1!=this.states.indexOf("2")?this.$Message.warning("不能再次装箱已经装箱的报运单"):-1!=this.states.indexOf("0")?this.$Message.warning("不能装箱草稿状态的报运单"):null!=this.groupId&&""!=this.groupId&&this.groupId.length>0?this.addModal=!0:this.$Message.warning("请至少选择一项开始装箱")},addPackingList:function(){var t=this;this.packingForm.exportIds="",this.groupId.forEach(function(e,a){t.packingForm.exportIds+=e,a+1<t.groupId.length&&(t.packingForm.exportIds+=",")}),this.$refs.packingForm.validate(function(e){if(e){var a=t.packingForm;(0,r.default)({url:"/cargo/packingList/",method:"post",data:a}).then(function(e){t.gopage(t.pageNo),t.$refs.packingForm.resetFields(),t.$Message.success("Success!"),t.addModal=!1})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})}},"cancel",function(){this.$Message.info("点击了取消")}),mounted:function(){this.gopage(this.pageNo)}}},860:function(t,e,a){var n=a(861);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(15)("06e3e6f1",n,!1,{})},861:function(t,e,a){e=t.exports=a(14)(!1),e.push([t.i,"\nli[data-v-3620d152]{list-style-type: none\n}\n",""])},862:function(t,e,a){"use strict";e.__esModule=!0;var n=a(863),o=function(t){return t&&t.__esModule?t:{default:t}}(n);e.default=function(t,e,a){return e in t?(0,o.default)(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},863:function(t,e,a){t.exports={default:a(864),__esModule:!0}},864:function(t,e,a){a(865);var n=a(1).Object;t.exports=function(t,e,a){return n.defineProperty(t,e,a)}},865:function(t,e,a){var n=a(10);n(n.S+n.F*!a(9),"Object",{defineProperty:a(8).f})},866:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("div",[a("ul",[a("li",[a("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(e){t.edit()}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(e){t.remove()}}},[t._v("删除")]),t._v(" "),a("Button",{attrs:{type:"warning"},on:{click:function(e){t.submit()}}},[t._v("提交")]),t._v(" "),a("Button",{attrs:{type:"info"},on:{click:function(e){t.cancel()}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{type:"success"},on:{click:function(e){t.exports()}}},[t._v("电子报运")]),t._v(" "),a("Button",{attrs:{type:"error"},on:{click:function(e){t.packing()}}},[t._v("装箱")])],1),t._v(" "),a("li",[a("div",{staticStyle:{padding:"10px 0"}},[a("Table",{attrs:{border:"",columns:t.columns1,data:t.data1},on:{"on-selection-change":function(e){t.change(e)}}})],1)]),t._v(" "),a("li",[a("div",{staticStyle:{"text-align":"right"}},[a("Page",{attrs:{total:t.totalCount,"page-size":t.pageSize,current:t.pageNo,align:"center"},on:{"on-change":t.gopage}})],1)])])]),t._v(" "),a("Modal",{attrs:{title:"添加装箱单","mask-closable":!1,loading:t.loading,width:"60%"},on:{"on-ok":t.addPackingList,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[a("Form",{ref:"packingForm",attrs:{model:t.packingForm,rules:t.formRule,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"卖方",prop:"seller"}},[a("Input",{attrs:{type:"text"},model:{value:t.packingForm.seller,callback:function(e){t.$set(t.packingForm,"seller",e)},expression:"packingForm.seller"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"买方",prop:"buyer"}},[a("Input",{attrs:{type:"text"},model:{value:t.packingForm.buyer,callback:function(e){t.$set(t.packingForm,"buyer",e)},expression:"packingForm.buyer"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"发票号",prop:"invoiceNo"}},[a("Input",{attrs:{type:"text"},model:{value:t.packingForm.invoiceNo,callback:function(e){t.$set(t.packingForm,"invoiceNo",e)},expression:"packingForm.invoiceNo"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"发票日期",prop:"invoiceDate"}},[a("DatePicker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"Select date"},model:{value:t.packingForm.invoiceDate,callback:function(e){t.$set(t.packingForm,"invoiceDate",e)},expression:"packingForm.invoiceDate"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"唛头",prop:"marks"}},[a("Input",{attrs:{type:"text"},model:{value:t.packingForm.marks,callback:function(e){t.$set(t.packingForm,"marks",e)},expression:"packingForm.marks"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"描述",prop:"descriptions"}},[a("Input",{attrs:{type:"text"},model:{value:t.packingForm.descriptions,callback:function(e){t.$set(t.packingForm,"descriptions",e)},expression:"packingForm.descriptions"}})],1)],1)],1)],1)],1)],1)},o=[];n._withStripped=!0;var s={render:n,staticRenderFns:o};e.default=s}});