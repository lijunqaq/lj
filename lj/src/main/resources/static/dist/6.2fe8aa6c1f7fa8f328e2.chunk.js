webpackJsonp([6],{261:function(t,e,o){"use strict";function a(t){l||o(855)}Object.defineProperty(e,"__esModule",{value:!0});var r=o(762),n=o.n(r);for(var s in r)"default"!==s&&function(t){o.d(e,t,function(){return r[t]})}(s);var c=o(857),d=o.n(c),l=!1,u=o(4),i=a,p=u(n.a,d.a,!1,i,"data-v-5053cf5d",null);p.options.__file="src/views/cargo/contract/ExtCproduct.vue",e.default=p.exports},342:function(t,e,o){"use strict";function a(t){return new Date(t).Format("yyyy-MM-dd")}Object.defineProperty(e,"__esModule",{value:!0}),Date.prototype.Format=function(t){var e={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in e)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?e[o]:("00"+e[o]).substr((""+e[o]).length)));return t},e.default=a},728:function(t,e,o){t.exports={default:o(729),__esModule:!0}},729:function(t,e,o){o(730),t.exports=o(1).Number.isInteger},730:function(t,e,o){var a=o(10);a(a.S,"Number",{isInteger:o(731)})},731:function(t,e,o){var a=o(11),r=Math.floor;t.exports=function(t){return!a(t)&&isFinite(t)&&r(t)===t}},762:function(t,e,o){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=o(728),n=a(r),s=o(57),c=a(s),d=o(342);a(d);e.default={data:function(){var t=function(t,e,o){""===e&&o(new Error("请输入购销合同货物-附件名"))};return{loading:!0,contractProductId:null,count:0,gourpId:null,tempIndex:0,pageSize:20,pageNo:1,totalPage:0,totalCount:0,columns1:[{type:"selection",width:60,align:"center"},{title:"厂家",key:"factoryName"},{title:"货号",key:"productNo"},{title:"包装单位",key:"packingUnit"},{title:"数量",key:"cnumber"},{title:"单价",key:"price"},{title:"总金额",key:"amount"}],self:this,data1:[],modal1:!1,modal2:!1,updateForm:{factory:{id:""},contractProduct:{id:""},factoryName:"",productNo:"",productImage:"",productDesc:"",packingUnit:"",cnumber:"",outNumber:"",finished:"",productRequest:"",price:"",amount:"",orderNo:""},addForm:{factory:{id:""},contractProduct:{id:""},factoryName:"",productNo:"",productImage:"",productDesc:"",packingUnit:"",cnumber:"1",outNumber:"",finished:"",productRequest:"",price:"1",amount:"",orderNo:"11"},ruleCustom:{extCproductName:[{validator:t,trigger:"blur"}],id:[{validator:function(t,e,o){if(""===e)return o(new Error("年龄不能为空"));setTimeout(function(){(0,n.default)(e)?e<18?o(new Error("必须年满18！")):o():o(new Error("请输入整数"))},1e3)},trigger:"blur"}]}}},methods:{changeFactory:function(t,e){t.factoryName=e.label},reset:function(t){this.$refs[t].resetFields()},addContractProduct:function(){this.modal2=!0},add:function(){var t=this;this.$refs.addForm.validate(function(e){if(e){t.addForm.contractProduct.id=t.contractProductId;var o=t.addForm;(0,c.default)({url:"/cargo/extCproduct",method:"post",data:o}).then(function(e){t.gopage(t.pageNo),t.$refs.addForm.resetFields(),t.$Message.success("Success!"),t.modal2=!1})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})},change:function(t){1==t.length&&(this.updateForm=t[0],null==this.updateForm.factory&&(this.updateForm.factory={id:null})),this.setGroupId(t)},setGroupId:function(t){this.groupId=[],this.count=t.length;for(var e=0;e<t.length;e++)this.groupId.push(t[e].id)},edit:function(){1!=this.count?(this.modal1=!1,this.$Message.warning("请至少并只能选择一项")):this.modal1=!0},remove:function(){var t=this;null!=this.groupId&&""!=this.groupId?(0,c.default)({url:"/cargo/extCproduct/",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))}):this.$Message.warning("请至少选择一项")},update:function(){var t=this;(0,c.default)({url:"/cargo/extCproduct",method:"put",data:this.updateForm}).then(function(e){t.modal1=!1,t.$Message.success("Success!"),t.gopage(t.pageNo)})},handleReset:function(t){this.$refs[t].resetFields()},gopage:function(t){var e=this,o=this.pageSize,a=this.contractProductId;(0,c.default)({url:"/cargo/extCproduct",method:"get",params:{pageNo:t,pageSize:o,contractProductId:a}}).then(function(a){e.data1=a.data.list,e.pageNo=t,e.pageSize=o,e.totalCount=a.data.totalCount})}},mounted:function(){var t=this;this.contractProductId=this.$route.params.id,this.gopage(this.pageNo),(0,c.default)({url:"/cargo/factory/all",method:"get",params:{cType:"附件"}}).then(function(e){t.factoryList=e.data})}}},855:function(t,e,o){var a=o(856);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);o(15)("501ab937",a,!1,{})},856:function(t,e,o){e=t.exports=o(14)(!1),e.push([t.i,"\nli[data-v-5053cf5d]{list-style-type: none\n}\n",""])},857:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var t=this,e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"animated fadeIn"},[a("div",[a("ul",[a("li",[a("Button",{attrs:{type:"primary",icon:"plus-round"},on:{click:function(t){e.addContractProduct()}}},[e._v("新建")]),e._v(" "),a("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(t){e.edit()}}},[e._v("修改")]),e._v(" "),a("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(t){e.remove()}}},[e._v("删除")]),e._v(" "),a("Button",{attrs:{type:"info",icon:"arrow-left-c"},on:{click:function(){t.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),a("li",[a("div",{staticStyle:{padding:"10px 0"}},[a("Table",{attrs:{columns:e.columns1,data:e.data1},on:{"on-selection-change":function(t){e.change(t)}}})],1)]),e._v(" "),a("li",[a("div",{staticStyle:{"text-align":"right"}},[a("Page",{attrs:{total:e.totalCount,"page-size":e.pageSize,current:e.pageNo,align:"center"},on:{"on-change":e.gopage}})],1)])])]),e._v(" "),a("Modal",{attrs:{title:"编辑购销合同货物-附件",width:"60%",loading:e.loading},on:{"on-ok":e.update,"on-cancel":e.cancel},model:{value:e.modal1,callback:function(t){e.modal1=t},expression:"modal1"}},[a("Form",{ref:"updateForm",attrs:{model:e.updateForm,rules:e.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"生产厂家",prop:"factory.id"}},[a("Select",{attrs:{filterable:"","label-in-value":"true"},on:{"on-change":function(o){return e.changeFactory(t.updateFrom,o)}},model:{value:e.updateForm.factory.id,callback:function(t){e.$set(e.updateForm.factory,"id",t)},expression:"updateForm.factory.id"}},e._l(e.factoryList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.factoryName))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"货号",prop:"productNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.productNo,callback:function(t){e.$set(e.updateForm,"productNo",t)},expression:"updateForm.productNo"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"数量",prop:"cnumber"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.cnumber,callback:function(t){e.$set(e.updateForm,"cnumber",t)},expression:"updateForm.cnumber"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"包装单位",prop:"packingUnit"}},[a("Radio-group",{attrs:{type:"button"},model:{value:e.updateForm.packingUnit,callback:function(t){e.$set(e.updateForm,"packingUnit",t)},expression:"updateForm.packingUnit"}},[a("Radio",{attrs:{label:"PCS"}},[e._v("只")]),e._v(" "),a("Radio",{attrs:{label:"SETS"}},[e._v("套")])],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"单价",prop:"price"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.price,callback:function(t){e.$set(e.updateForm,"price",t)},expression:"updateForm.price"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号",prop:"orderNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.updateForm.orderNo,callback:function(t){e.$set(e.updateForm,"orderNo",t)},expression:"updateForm.orderNo"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"货物描述",prop:"productDesc"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.updateForm.productDesc,callback:function(t){e.$set(e.updateForm,"productDesc",t)},expression:"updateForm.productDesc"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"要求",prop:"productRequest"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.updateForm.productRequest,callback:function(t){e.$set(e.updateForm,"productRequest",t)},expression:"updateForm.productRequest"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.update}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(t){e.reset("updateForm")}}},[e._v("清空")])],1)],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{title:"添加购销合同货物-附件",width:"60%",loading:e.loading},on:{"on-ok":e.add,"on-cancel":e.cancel},model:{value:e.modal2,callback:function(t){e.modal2=t},expression:"modal2"}},[a("Form",{ref:"addForm",attrs:{model:e.addForm,rules:e.ruleCustom,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"生产厂家",prop:"factory.id"}},[a("Select",{attrs:{filterable:"","label-in-value":"true"},on:{"on-change":function(o){return e.changeFactory(t.addForm,o)}},model:{value:e.addForm.factory.id,callback:function(t){e.$set(e.addForm.factory,"id",t)},expression:"addForm.factory.id"}},e._l(e.factoryList,function(t){return a("Option",{key:t.id,attrs:{value:t.id}},[e._v(e._s(t.factoryName))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"货号",prop:"productNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.productNo,callback:function(t){e.$set(e.addForm,"productNo",t)},expression:"addForm.productNo"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"数量",prop:"cnumber"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.cnumber,callback:function(t){e.$set(e.addForm,"cnumber",t)},expression:"addForm.cnumber"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"包装单位",prop:"packingUnit"}},[a("Radio-group",{attrs:{type:"button"},model:{value:e.addForm.packingUnit,callback:function(t){e.$set(e.addForm,"packingUnit",t)},expression:"addForm.packingUnit"}},[a("Radio",{attrs:{label:"PCS"}},[e._v("只")]),e._v(" "),a("Radio",{attrs:{label:"SETS"}},[e._v("套")])],1)],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"装率",prop:"loadingRate"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.loadingRate,callback:function(t){e.$set(e.addForm,"loadingRate",t)},expression:"addForm.loadingRate"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"箱数",prop:"boxNum"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.boxNum,callback:function(t){e.$set(e.addForm,"boxNum",t)},expression:"addForm.boxNum"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"单价",prop:"price"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.price,callback:function(t){e.$set(e.addForm,"price",t)},expression:"addForm.price"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号",prop:"orderNo"}},[a("Input",{attrs:{type:"text"},model:{value:e.addForm.orderNo,callback:function(t){e.$set(e.addForm,"orderNo",t)},expression:"addForm.orderNo"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"货物描述",prop:"productDesc"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.addForm.productDesc,callback:function(t){e.$set(e.addForm,"productDesc",t)},expression:"addForm.productDesc"}})],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),e._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"要求",prop:"productRequest"}},[a("Input",{attrs:{type:"textarea"},model:{value:e.addForm.productRequest,callback:function(t){e.$set(e.addForm,"productRequest",t)},expression:"addForm.productRequest"}})],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"24"}},[a("FormItem",[a("Button",{attrs:{type:"primary"},on:{click:e.add}},[e._v("保存")]),e._v(" "),a("Button",{attrs:{type:"ghost"},on:{click:function(t){e.reset("addForm")}}},[e._v("清空")])],1)],1)],1)],1)],1)],1)},r=[];a._withStripped=!0;var n={render:a,staticRenderFns:r};e.default=n}});