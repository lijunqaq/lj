webpackJsonp([29],{258:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(759),o=a.n(r);for(var l in r)"default"!==l&&function(t){a.d(e,t,function(){return r[t]})}(l);var s=a(850),n=a.n(s),d=a(4),i=d(o.a,n.a,!1,null,null,null);i.options.__file="src/views/system/Module.vue",e.default=i.exports},759:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a(57),o=function(t){return t&&t.__esModule?t:{default:t}}(r);e.default={data:function(){return{loading:!0,count:0,gourpId:null,keyWord:"",pageSize:8,pageNo:1,totalPage:0,totalCount:0,columns1:[{type:"selection",width:60,align:"center"},{title:"模块名",key:"name"},{title:"层数",key:"layerNum"},{title:"权限标识",key:"cpermission"},{title:"链接",key:"curl"},{title:"类型",key:"ctype",filters:[{label:"主菜单",value:0},{label:"左侧菜单",value:1},{label:"按钮",value:2},{label:"链接",value:3},{label:"状态",value:4}],filterMultiple:!1,filterMethod:function(t,e){return 0===t?0===e.ctype:1===t?1===e.ctype:2===t?2===e.ctype:3===t?3===e.ctype:4===t?4===e.ctype:void 0},render:function(t,e){var a=parseInt(e.row.ctype);return 0===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"主菜单")]):1===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"左侧菜单")]):2===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"按钮")]):3===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"链接")]):4===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"状态")]):void 0}},{title:"状态",ellipsis:"true",key:"state",filters:[{label:"启用",value:1},{label:"禁用",value:0}],filterMultiple:!1,filterMethod:function(t,e){return 1===t?1===e.state:0===t?0===e.state:void 0},render:function(t,e){var a=parseInt(e.row.state);return 1===a?t("div",[t("Tag",{props:{type:"dot",color:"green"}},"启用")]):0===a?t("div",[t("Tag",{props:{type:"dot",color:"red"}},"禁用")]):void 0}}],self:this,data1:[],updateModal:!1,addModal:!1,dataForm:{name:"",moduleName:"",layerNum:"1",cpermission:"",curl:"",ctype:"0",state:"1",remark:"",orderNo:"",parentId:""},formRule:{name:[{required:!0,message:"不能为空",trigger:"blur"}],layerNum:[{required:!0,message:"层数不能为空",trigger:"blur"}],isLeaf:[{required:!0,message:"不能为空",trigger:"blur"}],ico:[{required:!0,message:"不能为空",trigger:"blur"}],cpermission:[{required:!0,message:"不能为空",trigger:"blur"}],curl:[{required:!0,message:"不能为空",trigger:"blur"}],ctype:[{required:!0,message:"不能为空",trigger:"blur"}],state:[{required:!0,message:"不能为空",trigger:"blur"}],belong:[{required:!0,message:"不能为空",trigger:"blur"}],cwhich:[{required:!0,message:"不能为空",trigger:"blur"}],remark:[{required:!0,message:"不能为空",trigger:"blur"}],orderNo:[{required:!0,message:"不能为空",trigger:"blur"}]},moduleList:{},degreeList:[{value:"0",label:"超级管理员"},{value:"1",label:"跨部门跨人员"},{value:"2",label:"管理所有下属部门和人员"},{value:"3",label:"管理本部门"},{value:"4",label:"普通员工"}]}},methods:{change:function(t){this.count=t.length,1==t.length&&(this.updateForm=t[0]),this.setGroupId(t)},setGroupId:function(t){this.groupId=[];for(var e=0;e<t.length;e++)this.groupId.push(t[e].id)},addModule:function(){this.addModal=!0},add:function(){var t=this,e=this.dataForm;this.$refs.addForm.validate(function(a){a?(0,o.default)({url:"/system/module",method:"post",data:e}).then(function(e){t.$refs.addForm.resetFields(),t.addModal=!1,t.gopage(t.pageNo),t.$Message.success("Success!")}):(t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3))})},changeCType:function(t){var e=this;this.dataForm.layerNum=parseInt(t)+1,(0,o.default)({url:"/system/module/getParent/"+t,method:"get"}).then(function(t){e.moduleList=t.data})},edit:function(t){if(1!=this.count)this.updateModal=!1,this.$Message.warning("请至少并只能选择一项");else{this.updateModal=!0;var e=this.updateForm;this.dataForm=e,this.dataForm.ctype=e.ctype+"",this.dataForm.state=e.state+"",this.changeCType(e.ctype)}},remove:function(){var t=this;(0,o.default)({url:"/system/module",method:"delete",data:this.groupId}).then(function(e){"ok"==e.data&&(t.$Message.success("Success!"),t.gopage(t.pageNo))})},ok:function(){this.updateModal=!1,this.$Message.info("点击了确定")},cancel:function(){this.$Message.info("点击了取消")},update:function(){var t=this;this.$refs.updateForm.validate(function(e){if(e){var a=t.dataForm;(0,o.default)({url:"/system/module",method:"put",data:a}).then(function(e){t.updateModal=!1,t.gopage(t.pageNo),t.$Message.success("Success!")})}else t.$Message.error("表单验证失败"),setTimeout(function(){t.loading=!1,t.$nextTick(function(){t.loading=!0})},1e3)})},handleReset:function(t){this.$refs[t].resetFields()},gopage:function(t){var e=this,a=this.pageSize,r=this.keyWord;(0,o.default)({url:"/system/module",method:"get",params:{pageNo:t,pageSize:a,keyWord:r}}).then(function(r){e.data1=r.data.list,e.pageNo=t,e.pageSize=a,e.totalCount=r.data.totalCount})}},created:function(){this.gopage(this.pageNo)}}},850:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animated fadeIn"},[a("Row",[a("Col",{attrs:{span:"6"}},[t._v("\n            模块："),a("Input",{staticStyle:{width:"200px"},attrs:{placeholder:"请输入..."},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}})],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("Button",{attrs:{type:"primary",shape:"circle",icon:"ios-search"},on:{click:function(e){t.gopage()}}},[t._v("搜索")])],1)],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Button",{attrs:{type:"primary",icon:"plus-round"},on:{click:function(e){t.addModule()}}},[t._v("新建")]),t._v(" "),a("Button",{attrs:{type:"success",icon:"wrench"},on:{click:function(e){t.edit()}}},[t._v("修改")]),t._v(" "),a("Button",{attrs:{type:"error",icon:"trash-a"},on:{click:function(e){t.remove()}}},[t._v("删除")])],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Table",{attrs:{border:"",columns:t.columns1,data:t.data1},on:{"on-selection-change":t.change}})],1),t._v(" "),a("br"),t._v(" "),a("Row",[a("Page",{attrs:{total:t.totalCount,"page-size":t.pageSize,current:t.pageNo,align:"center"},on:{"on-change":t.gopage}})],1),t._v(" "),a("br"),t._v(" "),a("Modal",{attrs:{title:"编辑模块",width:"60%",loading:t.loading},on:{"on-ok":t.update,"on-cancel":t.cancel},model:{value:t.updateModal,callback:function(e){t.updateModal=e},expression:"updateModal"}},[a("Form",{ref:"updateForm",attrs:{model:t.dataForm,rules:t.formRule,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"等级",prop:"ctype"}},[a("RadioGroup",{on:{"on-change":t.changeCType},model:{value:t.dataForm.ctype,callback:function(e){t.$set(t.dataForm,"ctype",e)},expression:"dataForm.ctype"}},[a("Radio",{attrs:{label:"0"}},[t._v("主菜单")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("左侧菜单")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("按钮")]),t._v(" "),a("Radio",{attrs:{label:"3"}},[t._v("链接")]),t._v(" "),a("Radio",{attrs:{label:"4"}},[t._v("状态")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"父模块",prop:"parentId"}},[a("Select",{attrs:{filterable:""},model:{value:t.dataForm.parentId,callback:function(e){t.$set(t.dataForm,"parentId",e)},expression:"dataForm.parentId"}},t._l(t.moduleList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"登录名",prop:"name"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"层数"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.layerNum,callback:function(e){t.$set(t.dataForm,"layerNum",e)},expression:"dataForm.layerNum"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"权限标识",prop:"cpermission"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.cpermission,callback:function(e){t.$set(t.dataForm,"cpermission",e)},expression:"dataForm.cpermission"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"链接",prop:"curl"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.curl,callback:function(e){t.$set(t.dataForm,"curl",e)},expression:"dataForm.curl"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"状态",prop:"state"}},[a("Radio-group",{attrs:{type:"button"},model:{value:t.dataForm.state,callback:function(e){t.$set(t.dataForm,"state",e)},expression:"dataForm.state"}},[a("Radio",{attrs:{label:"1"}},[t._v("启用")]),t._v(" "),a("Radio",{attrs:{label:"0"}},[t._v("停用")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.orderNo,callback:function(e){t.$set(t.dataForm,"orderNo",e)},expression:"dataForm.orderNo"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.dataForm.remark,callback:function(e){t.$set(t.dataForm,"remark",e)},expression:"dataForm.remark"}})],1)],1)],1)],1)],1),t._v(" "),a("Modal",{attrs:{title:"添加模块",width:"60%",loading:t.loading},on:{"on-ok":t.add,"on-cancel":t.cancel},model:{value:t.addModal,callback:function(e){t.addModal=e},expression:"addModal"}},[a("Form",{ref:"addForm",attrs:{model:t.dataForm,rules:t.formRule,"label-width":80}},[a("Row",[a("Col",{attrs:{span:"14"}},[a("FormItem",{attrs:{label:"等级",prop:"ctype"}},[a("RadioGroup",{on:{"on-change":t.changeCType},model:{value:t.dataForm.ctype,callback:function(e){t.$set(t.dataForm,"ctype",e)},expression:"dataForm.ctype"}},[a("Radio",{attrs:{label:"0"}},[t._v("主菜单")]),t._v(" "),a("Radio",{attrs:{label:"1"}},[t._v("左侧菜单")]),t._v(" "),a("Radio",{attrs:{label:"2"}},[t._v("按钮")]),t._v(" "),a("Radio",{attrs:{label:"3"}},[t._v("链接")]),t._v(" "),a("Radio",{attrs:{label:"4"}},[t._v("状态")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"父模块",prop:"parentId"}},[a("Select",{attrs:{filterable:""},model:{value:t.dataForm.parentId,callback:function(e){t.$set(t.dataForm,"parentId",e)},expression:"dataForm.parentId"}},t._l(t.moduleList,function(e){return a("Option",{key:e.id,attrs:{value:e.id}},[t._v(t._s(e.name))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"登录名",prop:"name"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"层数"}},[a("Input",{attrs:{type:"text",readonly:""},model:{value:t.dataForm.layerNum,callback:function(e){t.$set(t.dataForm,"layerNum",e)},expression:"dataForm.layerNum"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"权限标识",prop:"cpermission"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.cpermission,callback:function(e){t.$set(t.dataForm,"cpermission",e)},expression:"dataForm.cpermission"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"链接",prop:"curl"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.curl,callback:function(e){t.$set(t.dataForm,"curl",e)},expression:"dataForm.curl"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"状态",prop:"state"}},[a("Radio-group",{attrs:{type:"button"},model:{value:t.dataForm.state,callback:function(e){t.$set(t.dataForm,"state",e)},expression:"dataForm.state"}},[a("Radio",{attrs:{label:"1"}},[t._v("启用")]),t._v(" "),a("Radio",{attrs:{label:"0"}},[t._v("停用")])],1)],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"排序号"}},[a("Input",{attrs:{type:"text"},model:{value:t.dataForm.orderNo,callback:function(e){t.$set(t.dataForm,"orderNo",e)},expression:"dataForm.orderNo"}})],1)],1),t._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"2"}}),t._v(" "),a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"说明",prop:"remark"}},[a("Input",{attrs:{type:"textarea"},model:{value:t.dataForm.remark,callback:function(e){t.$set(t.dataForm,"remark",e)},expression:"dataForm.remark"}})],1)],1)],1)],1)],1)],1)},o=[];r._withStripped=!0;var l={render:r,staticRenderFns:o};e.default=l}});